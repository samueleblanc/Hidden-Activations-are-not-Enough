beluga = [
    [2408.5456981658936,
    1934.086213350296,
    1768.5556993484497,
    1876.8755557537079,
    1930.2119140625,
    1854.7182121276855,
    1731.2948191165924,
    1854.2391924858093,
    1864.6242616176605,
    1963.8295104503632,
    1932.9589414596558,
    1888.6854536533356,
    1818.2928111553192,
    1804.3093452453613,
    1781.3463892936707,
    1790.0206551551819,
    1824.0720884799957,
    1826.8295860290527],

    [2240.3812494277954,
    1838.337108373642,
    1676.6074588298798,
    1955.5637936592102,
    1875.6883680820465,
    1772.4714937210083,
    1847.3309571743011,
    2331.4116871356964,
    1873.6187119483948,
    1927.8643531799316,
    1914.0805299282074,
    2085.589383840561,
    1828.7447800636292,
    1805.2156431674957,
    1854.8408250808716,
    1757.7703547477722,
    1781.2352123260498,
    1756.5302996635437],

    [2264.101022005081,
    1878.0191564559937,
    1690.8930027484894,
    1625.4495193958282,
    1549.5531101226807,
    1611.77765583992,
    1696.409123659134,
    1632.9959144592285,
    1523.0748114585876,
    1653.8358266353607,
    1790.5182542800903,
    2025.7990274429321,
    2058.2016134262085,
    1877.8503413200378,
    1735.3063142299652,
    1657.9669981002808,
    1727.5415918827057,
    1692.2599432468414],
    #1688.680911540985]
    #1770.7142853736877]

    [563.445940256119,
    2317.3926861286163,
    1742.3418056964874,
    1938.0673010349274,
    1925.1866371631622,
    1708.0379800796509,
    1826.408830165863,
    1792.1781740188599,
    1805.8766951560974,
    1863.2465422153473,
    1821.2494986057281,
    1761.2272391319275,
    1838.2241282463074,
    1726.3742837905884,
    1788.934785604477,
    1740.5777461528778,
    1773.235323190689,
    1804.9071671962738],
    #1770.851857662201],

    [2272.2801587581635,
    1837.1013958454132,
    1663.1431860923767,
    1883.1678545475006,
    1922.0505599975586,
    1775.3586556911469,
    1833.1616156101227,
    1982.9940361976624,
    2307.7978661060333,
    3131.0622041225433,
    2521.095921278,
    1800.2066264152527,
    1815.116938829422,
    1799.5546185970306,
    1815.9050357341766,
    1779.2297868728638,
    1779.4003493785858,
    1807.539538860321]
    ]

import numpy as np
from matplotlib import pyplot as plt
'''
x = [i for i in range(1,19)]
#for i in range(5):
#    plt.plot(x, beluga[i])
#    plt.show()

beluga = np.array(beluga)

std = np.std(beluga, axis=0)
beluga = list(np.mean(beluga, axis=0))

print(std)
print(len(beluga))
plt.plot(x, beluga)
plt.show()

plt.plot(x, std)
plt.show()
'''

import re
times = []
for i in range(1,6):
    with open(f'slurm-44114951_{i}.out', 'r') as file:
        times.append([float(match.group(1)) for line in file if (match := re.search(r'Time:  ([\d.]+)', line))])

print(len(times))

for i in range(5):
    print(len(times[i]))
#input()
times = np.array(times)
x = [i for i in range(40,60)]
mean = np.mean(times, axis=0)
std = np.std(times, axis=0)
plt.plot(x, mean)
plt.title('Average time per batch size NARVAL')
plt.ylim(0,1200)
plt.show()
plt.plot(x, std)
plt.ylim(0,60)
plt.title('Std dev per batch size NARVAL')
plt.show()

